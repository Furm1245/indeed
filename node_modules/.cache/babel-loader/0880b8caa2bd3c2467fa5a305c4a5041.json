{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/pures/projects/indeed/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/pures/projects/indeed/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pures\\\\projects\\\\indeed\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useContext}from'react';import classes from'./AuthForm.module.css';import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Form}from'react-bootstrap';import{AuthContext}from'../../shared/context/auth-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthForm=function AuthForm(){var auth=useContext(AuthContext);var navigate=useNavigate();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoginMode=_useState2[0],setIsLoginMode=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),age=_useState10[0],setAge=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),number=_useState12[0],setNumber=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),experience=_useState14[0],setExperience=_useState14[1];var switchModeHandler=function switchModeHandler(){setIsLoginMode(function(prevMode){return!prevMode;});};var Register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,responseData,_response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(isLoginMode){_context.next=18;break;}_context.prev=2;_context.next=5;return fetch(\"\".concat(process.env.REACT_APP_BACKEND_URLS,\"/register\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:name,password:password,email:email,number:number,age:age,experience:experience})});case 5:response=_context.sent;_context.next=8;return response.json();case 8:responseData=_context.sent;switchModeHandler();if(response.ok){_context.next=12;break;}throw new Error(responseData.message);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);case 16:_context.next=31;break;case 18:_context.prev=18;_context.next=21;return fetch(\"\".concat(process.env.REACT_APP_BACKEND_URLS,\"/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 21:_response=_context.sent;_context.next=24;return _response.json();case 24:data=_context.sent;auth.login(data.userId,data.token);if(data.userId){localStorage.setItem('token',data.userId);navigate('/');}else{alert('Please check your username and password');}_context.next=31;break;case 29:_context.prev=29;_context.t1=_context[\"catch\"](18);case 31:case\"end\":return _context.stop();}}},_callee,null,[[2,14],[18,29]]);}));return function Register(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"section\",{className:classes.page,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.auth,children:[/*#__PURE__*/_jsxs(Form,{onSubmit:Register,children:[/*#__PURE__*/_jsx(\"h1\",{children:isLoginMode?'Login':'SignUp'}),!isLoginMode&&/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:name,type:\"text\",onChange:function onChange(e){return setName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{value:password,type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},required:true})]}),!isLoginMode&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Phone Number\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:number,onChange:function onChange(e){return setNumber(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Experience\"}),/*#__PURE__*/_jsx(Form.Control,{value:experience,type:\"text\",onChange:function onChange(e){return setExperience(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Age\"}),/*#__PURE__*/_jsx(Form.Control,{value:age,type:\"Number\",onChange:function onChange(e){return setAge(e.target.value);},required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isLoginMode?'LOGIN':'SIGNUP'})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsxs(\"button\",{onClick:switchModeHandler,children:[\"SWITCH TO \",isLoginMode?'SIGNUP':'LOGIN']})})]})})});};export default AuthForm;","map":{"version":3,"sources":["C:/Users/pures/projects/indeed/src/components/Auth/AuthForm.js"],"names":["useContext","classes","React","useState","useNavigate","Form","AuthContext","AuthForm","auth","navigate","isLoginMode","setIsLoginMode","name","setName","password","setPassword","email","setEmail","age","setAge","number","setNumber","experience","setExperience","switchModeHandler","prevMode","Register","event","preventDefault","fetch","process","env","REACT_APP_BACKEND_URLS","method","headers","body","JSON","stringify","response","json","responseData","ok","Error","message","data","login","userId","token","localStorage","setItem","alert","page","e","target","value","actions"],"mappings":"wWAAA,OAASA,UAAT,KAA2B,OAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,IAAT,KAAqB,iBAArB,CACA,OAASC,WAAT,KAA4B,mCAA5B,C,wFAGA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAMC,CAAAA,IAAI,CAAGR,UAAU,CAACM,WAAD,CAAvB,CACA,GAAMG,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CACA,cAAsCD,QAAQ,CAAC,IAAD,CAA9C,wCAAOO,WAAP,eAAoBC,cAApB,eAEA,eAAwBR,QAAQ,CAAC,EAAD,CAAhC,yCAAOS,IAAP,eAAaC,OAAb,eACA,eAAgCV,QAAQ,CAAC,EAAD,CAAxC,yCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAA0BZ,QAAQ,CAAC,EAAD,CAAlC,yCAAOa,KAAP,eAAcC,QAAd,eACA,eAAsBd,QAAQ,CAAC,EAAD,CAA9B,0CAAOe,GAAP,gBAAYC,MAAZ,gBACA,gBAA4BhB,QAAQ,CAAC,EAAD,CAApC,2CAAOiB,MAAP,gBAAeC,SAAf,gBACA,gBAAoClB,QAAQ,CAAC,EAAD,CAA5C,2CAAOmB,UAAP,gBAAmBC,aAAnB,gBAGA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9Bb,cAAc,CAAC,SAAAc,QAAQ,QAAI,CAACA,QAAL,EAAT,CAAd,CACD,CAFD,CAIA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAMC,KAAN,2JACfA,KAAK,CAACC,cAAN,GADe,GAGVlB,WAHU,gEAKYmB,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,cAAmD,CAC7EC,MAAM,CAAE,MADqE,CAE7EC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFoE,CAK7EC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBzB,IAAI,CAAJA,IADmB,CAEnBE,QAAQ,CAARA,QAFmB,CAGnBE,KAAK,CAALA,KAHmB,CAInBI,MAAM,CAANA,MAJmB,CAKnBF,GAAG,CAAHA,GALmB,CAMnBI,UAAU,CAAVA,UANmB,CAAf,CALuE,CAAnD,CALjB,QAKLgB,QALK,qCAmBgBA,CAAAA,QAAQ,CAACC,IAAT,EAnBhB,QAmBLC,YAnBK,eAoBXhB,iBAAiB,GApBN,GAsBNc,QAAQ,CAACG,EAtBH,+BAuBH,IAAIC,CAAAA,KAAJ,CAAUF,YAAY,CAACG,OAAvB,CAvBG,yKA4BYd,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,WAAgD,CAC1EC,MAAM,CAAE,MADkE,CAE1EC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFiE,CAK1EC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBrB,KAAK,CAALA,KADmB,CAEnBF,QAAQ,CAARA,QAFmB,CAAf,CALoE,CAAhD,CA5BjB,SA4BLwB,SA5BK,sCAsCQA,CAAAA,SAAQ,CAACC,IAAT,EAtCR,SAsCLK,IAtCK,eAwCXpC,IAAI,CAACqC,KAAL,CAAWD,IAAI,CAACE,MAAhB,CAAwBF,IAAI,CAACG,KAA7B,EACA,GAAIH,IAAI,CAACE,MAAT,CAAiB,CACfE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BL,IAAI,CAACE,MAAnC,EACArC,QAAQ,CAAC,GAAD,CAAR,CACD,CAHD,IAGO,CACLyC,KAAK,CAAC,yCAAD,CAAL,CACD,CA9CU,+JAAH,kBAARxB,CAAAA,QAAQ,4CAAd,CAqDA,mBACE,KAAC,KAAD,CAAO,QAAP,wBACE,gBAAS,SAAS,CAAEzB,OAAO,CAACkD,IAA5B,uBACE,aAAK,SAAS,CAAElD,OAAO,CAACO,IAAxB,wBACE,MAAC,IAAD,EAAM,QAAQ,CAAEkB,QAAhB,wBACE,oBAAKhB,WAAW,CAAG,OAAH,CAAa,QAA7B,EADF,CAEG,CAACA,WAAD,eACC,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,mBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,KAAK,CAAEE,IADT,CAEE,IAAI,CAAC,MAFP,CAGE,QAAQ,CAAE,kBAACwC,CAAD,QAAOvC,CAAAA,OAAO,CAACuC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,EAHZ,CAIE,QAAQ,KAJV,EAFF,GAHJ,cAYE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAEtC,KAFT,CAGE,QAAQ,CAAE,kBAACoC,CAAD,QAAOnC,CAAAA,QAAQ,CAACmC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAHZ,CAIE,QAAQ,KAJV,EAFF,GAZF,cAoBE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,uBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,KAAK,CAAExC,QADT,CAEE,IAAI,CAAC,UAFP,CAGE,QAAQ,CAAE,kBAACsC,CAAD,QAAOrC,CAAAA,WAAW,CAACqC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAHZ,CAIE,QAAQ,KAJV,EAFF,GApBF,CA4BG,CAAC5C,WAAD,eACC,oCACE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,2BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEU,MAFT,CAGE,QAAQ,CAAE,kBAACgC,CAAD,QAAO/B,CAAAA,SAAS,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB,EAHZ,CAIE,QAAQ,KAJV,EAFF,GADF,cASE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,yBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,KAAK,CAAEhC,UADT,CAEE,IAAI,CAAC,MAFP,CAGE,QAAQ,CAAE,kBAAC8B,CAAD,QAAO7B,CAAAA,aAAa,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAApB,EAHZ,CAIE,QAAQ,KAJV,EAFF,GATF,cAiBE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,kBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,KAAK,CAAEpC,GADT,CAEE,IAAI,CAAC,QAFP,CAGE,QAAQ,CAAE,kBAACkC,CAAD,QAAOjC,CAAAA,MAAM,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb,EAHZ,CAIE,QAAQ,KAJV,EAFF,GAjBF,GA7BJ,cAwDE,YAAK,SAAS,CAAErD,OAAO,CAACsD,OAAxB,uBACE,eAAQ,IAAI,CAAC,QAAb,UACG7C,WAAW,CAAG,OAAH,CAAa,QAD3B,EADF,EAxDF,GADF,cA+DE,YAAK,SAAS,CAAET,OAAO,CAACsD,OAAxB,uBACE,gBAAQ,OAAO,CAAE/B,iBAAjB,wBACad,WAAW,CAAG,QAAH,CAAc,OADtC,GADF,EA/DF,GADF,EADF,EADF,CA2ED,CAjJD,CAmJA,cAAeH,CAAAA,QAAf","sourcesContent":["import { useContext } from 'react';\r\nimport classes from './AuthForm.module.css'\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Form } from 'react-bootstrap';\r\nimport { AuthContext } from '../../shared/context/auth-context';\r\n\r\n\r\nconst AuthForm = () => {\r\n  const auth = useContext(AuthContext)\r\n  const navigate = useNavigate()\r\n  const [isLoginMode, setIsLoginMode] = useState(true);\r\n\r\n  const [name, setName] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [age, setAge] = useState(\"\")\r\n  const [number, setNumber] = useState(\"\")\r\n  const [experience, setExperience] = useState(\"\")\r\n\r\n\r\n  const switchModeHandler = () => {\r\n    setIsLoginMode(prevMode => !prevMode);\r\n  };\r\n\r\n  const Register = async event => {\r\n    event.preventDefault();\r\n\r\n    if (!isLoginMode) {\r\n      try {\r\n        const response = await fetch(`${process.env.REACT_APP_BACKEND_URLS}/register`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            name,\r\n            password,\r\n            email,\r\n            number,\r\n            age,\r\n            experience\r\n          })\r\n        });\r\n        const responseData = await response.json()\r\n        switchModeHandler()\r\n\r\n        if (!response.ok) {\r\n          throw new Error(responseData.message)\r\n        }\r\n      } catch (err) { }\r\n    } else {\r\n      try {\r\n        const response = await fetch(`${process.env.REACT_APP_BACKEND_URLS}/login`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            email,\r\n            password,\r\n          }),\r\n        })\r\n        const data = await response.json()\r\n\r\n        auth.login(data.userId, data.token)\r\n        if (data.userId) {\r\n          localStorage.setItem('token', data.userId)\r\n          navigate('/')\r\n        } else {\r\n          alert('Please check your username and password')\r\n        }\r\n      } catch (err) { }\r\n    }\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <section className={classes.page}>\r\n        <div className={classes.auth}>\r\n          <Form onSubmit={Register}>\r\n            <h1>{isLoginMode ? 'Login' : 'SignUp'}</h1>\r\n            {!isLoginMode && (\r\n              <Form.Group >\r\n                <Form.Label>Name</Form.Label>\r\n                <Form.Control\r\n                  value={name}\r\n                  type='text'\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  required />\r\n              </Form.Group>\r\n            )}\r\n            <Form.Group>\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                type='email'\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                required />\r\n            </Form.Group>\r\n            <Form.Group >\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                value={password}\r\n                type='password'\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required />\r\n            </Form.Group>\r\n            {!isLoginMode && (\r\n              <div>\r\n                <Form.Group>\r\n                  <Form.Label>Phone Number</Form.Label>\r\n                  <Form.Control\r\n                    type='text'\r\n                    value={number}\r\n                    onChange={(e) => setNumber(e.target.value)}\r\n                    required />\r\n                </Form.Group>\r\n                <Form.Group >\r\n                  <Form.Label>Experience</Form.Label>\r\n                  <Form.Control\r\n                    value={experience}\r\n                    type='text'\r\n                    onChange={(e) => setExperience(e.target.value)}\r\n                    required />\r\n                </Form.Group>\r\n                <Form.Group >\r\n                  <Form.Label>Age</Form.Label>\r\n                  <Form.Control\r\n                    value={age}\r\n                    type='Number'\r\n                    onChange={(e) => setAge(e.target.value)}\r\n                    required />\r\n                </Form.Group>\r\n              </div>\r\n            )}\r\n            <div className={classes.actions}>\r\n              <button type=\"submit\" >\r\n                {isLoginMode ? 'LOGIN' : 'SIGNUP'}\r\n              </button>\r\n            </div>\r\n          </Form>\r\n          <div className={classes.actions}>\r\n            <button onClick={switchModeHandler}>\r\n              SWITCH TO {isLoginMode ? 'SIGNUP' : 'LOGIN'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default AuthForm;"]},"metadata":{},"sourceType":"module"}