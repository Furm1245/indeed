{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/pures/projects/indeed/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/pures/projects/indeed/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pures\\\\projects\\\\indeed\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useContext}from'react';import{useState,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import{useParams}from'react-router-dom';import classes from'./EditDetails.module.css';import{Form}from'react-bootstrap';import{AuthContext}from'../../shared/context/auth-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditDetails=function EditDetails(){var navigate=useNavigate();var auth=useContext(AuthContext);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),location=_useState4[0],setLocation=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),salary=_useState6[0],setSalary=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),type=_useState8[0],setType=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),qualifications=_useState10[0],setQualifications=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),description=_useState12[0],setDescription=_useState12[1];var jobId=useParams().id;useEffect(function(){var fetchInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var req,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(process.env.REACT_APP_BACKEND_URLS,\"/job/\").concat(jobId),{method:'GET',headers:{'Content-Type':'application/json'}});case 3:req=_context.sent;_context.next=6;return req.json();case 6:data=_context.sent;setTitle(data.job.title);setLocation(data.job.location);setSalary(data.job.salary);setType(data.job.type);setQualifications(data.job.qualifications);setDescription(data.job.description);if(req.ok){_context.next=15;break;}throw new Error(req.message);case 15:_context.next=19;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function fetchInfo(){return _ref.apply(this,arguments);};}();fetchInfo();},[jobId]);var editJob=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var req;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return fetch(\"\".concat(process.env.REACT_APP_BACKEND_URLS,\"/job/update\"),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:'Bearer '+auth.token},body:JSON.stringify({title:title,location:location,salary:salary,type:type,qualifications:qualifications,description:description})});case 4:req=_context2.sent;navigate(\"/details/\".concat(jobId));if(req.ok){_context2.next=8;break;}throw new Error(req.message);case 8:_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function editJob(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:classes.page,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.auth,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Job\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:editJob,children:[/*#__PURE__*/_jsxs(Form.Group,{className:classes.control,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Company Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:title,type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:classes.control,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Location\"}),/*#__PURE__*/_jsx(Form.Control,{value:location,type:\"text\",onChange:function onChange(e){return setLocation(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:classes.control,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Salary\"}),/*#__PURE__*/_jsx(Form.Control,{value:salary,type:\"text\",onChange:function onChange(e){return setSalary(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:classes.control,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Job Type\"}),/*#__PURE__*/_jsx(Form.Control,{value:type,type:\"text\",onChange:function onChange(e){return setType(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:classes.control,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Qualifications\"}),/*#__PURE__*/_jsx(Form.Control,{value:qualifications,as:\"textarea\",onChange:function onChange(e){return setQualifications(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:classes.control,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{value:description,as:\"textarea\",onChange:function onChange(e){return setDescription(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{children:\"Submit\"})})]})]})});};export default EditDetails;","map":{"version":3,"sources":["C:/Users/pures/projects/indeed/src/components/Details/EditDetails.js"],"names":["useContext","useState","useEffect","useNavigate","useParams","classes","Form","AuthContext","EditDetails","navigate","auth","title","setTitle","location","setLocation","salary","setSalary","type","setType","qualifications","setQualifications","description","setDescription","jobId","id","fetchInfo","fetch","process","env","REACT_APP_BACKEND_URLS","method","headers","req","json","data","job","ok","Error","message","editJob","event","preventDefault","Authorization","token","body","JSON","stringify","console","log","page","control","e","target","value","actions"],"mappings":"wWAAA,OAASA,UAAT,KAA2B,OAA3B,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,CACA,OAASC,IAAT,KAAqB,iBAArB,CACA,OAASC,WAAT,KAA4B,mCAA5B,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,CAAAA,IAAI,CAAGV,UAAU,CAACO,WAAD,CAAvB,CACA,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAAgCX,QAAQ,CAAC,EAAD,CAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eACA,eAA4Bb,QAAQ,CAAC,EAAD,CAApC,yCAAOc,MAAP,eAAeC,SAAf,eACA,eAAwBf,QAAQ,CAAC,EAAD,CAAhC,yCAAOgB,IAAP,eAAaC,OAAb,eACA,eAA4CjB,QAAQ,CAAC,EAAD,CAApD,0CAAOkB,cAAP,gBAAuBC,iBAAvB,gBACA,gBAAsCnB,QAAQ,CAAC,EAAD,CAA9C,2CAAOoB,WAAP,gBAAoBC,cAApB,gBACA,GAAMC,CAAAA,KAAK,CAAGnB,SAAS,GAAGoB,EAA1B,CAEAtB,SAAS,CAAC,UAAM,CACZ,GAAMuB,CAAAA,SAAS,0FAAG,sLAEQC,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,iBAA8CN,KAA9C,EAAuD,CAC1EO,MAAM,CAAE,KADkE,CAE1EC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFiE,CAAvD,CAFb,QAEJC,GAFI,qCAQSA,CAAAA,GAAG,CAACC,IAAJ,EART,QAQJC,IARI,eASVtB,QAAQ,CAACsB,IAAI,CAACC,GAAL,CAASxB,KAAV,CAAR,CACAG,WAAW,CAACoB,IAAI,CAACC,GAAL,CAAStB,QAAV,CAAX,CACAG,SAAS,CAACkB,IAAI,CAACC,GAAL,CAASpB,MAAV,CAAT,CACAG,OAAO,CAACgB,IAAI,CAACC,GAAL,CAASlB,IAAV,CAAP,CACAG,iBAAiB,CAACc,IAAI,CAACC,GAAL,CAAShB,cAAV,CAAjB,CACAG,cAAc,CAACY,IAAI,CAACC,GAAL,CAASd,WAAV,CAAd,CAdU,GAeLW,GAAG,CAACI,EAfC,+BAgBA,IAAIC,CAAAA,KAAJ,CAAUL,GAAG,CAACM,OAAd,CAhBA,+JAAH,kBAATb,CAAAA,SAAS,0CAAf,CAoBAA,SAAS,GACZ,CAtBQ,CAsBN,CAACF,KAAD,CAtBM,CAAT,CAyBA,GAAMgB,CAAAA,OAAO,2FAAG,kBAAOC,KAAP,8HACZA,KAAK,CAACC,cAAN,GADY,wCAGUf,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,sBAAhB,gBAAqD,CACxEC,MAAM,CAAE,KADgE,CAExEC,OAAO,CAAE,CACL,eAAgB,kBADX,CAELW,aAAa,CAAE,UAAYhC,IAAI,CAACiC,KAF3B,CAF+D,CAMxEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBnC,KAAK,CAALA,KADiB,CAEjBE,QAAQ,CAARA,QAFiB,CAGjBE,MAAM,CAANA,MAHiB,CAIjBE,IAAI,CAAJA,IAJiB,CAKjBE,cAAc,CAAdA,cALiB,CAMjBE,WAAW,CAAXA,WANiB,CAAf,CANkE,CAArD,CAHf,QAGFW,GAHE,gBAkBRvB,QAAQ,oBAAac,KAAb,EAAR,CAlBQ,GAmBHS,GAAG,CAACI,EAnBD,+BAoBE,IAAIC,CAAAA,KAAJ,CAAUL,GAAG,CAACM,OAAd,CApBF,6FAuBRS,OAAO,CAACC,GAAR,eAvBQ,uEAAH,kBAAPT,CAAAA,OAAO,6CAAb,CAgCA,mBACI,gBAAS,SAAS,CAAElC,OAAO,CAAC4C,IAA5B,uBACI,aAAK,SAAS,CAAE5C,OAAO,CAACK,IAAxB,wBACI,gCADJ,cAEI,MAAC,IAAD,EAAM,QAAQ,CAAE6B,OAAhB,wBACI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAElC,OAAO,CAAC6C,OAA/B,wBACI,KAAC,IAAD,CAAM,KAAN,2BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,KAAK,CAAEvC,KADX,CAEI,IAAI,CAAC,MAFT,CAGI,QAAQ,CAAE,kBAACwC,CAAD,QAAOvC,CAAAA,QAAQ,CAACuC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAHd,CAII,QAAQ,KAJZ,EAFJ,GADJ,cASI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAEhD,OAAO,CAAC6C,OAA/B,wBACI,KAAC,IAAD,CAAM,KAAN,uBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,KAAK,CAAErC,QADX,CAEI,IAAI,CAAC,MAFT,CAGI,QAAQ,CAAE,kBAACsC,CAAD,QAAOrC,CAAAA,WAAW,CAACqC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAHd,CAII,QAAQ,KAJZ,EAFJ,GATJ,cAiBI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAEhD,OAAO,CAAC6C,OAA/B,wBACI,KAAC,IAAD,CAAM,KAAN,qBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,KAAK,CAAEnC,MADX,CAEI,IAAI,CAAC,MAFT,CAGI,QAAQ,CAAE,kBAACoC,CAAD,QAAOnC,CAAAA,SAAS,CAACmC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB,EAHd,CAII,QAAQ,KAJZ,EAFJ,GAjBJ,cAyBI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAEhD,OAAO,CAAC6C,OAA/B,wBACI,KAAC,IAAD,CAAM,KAAN,uBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,KAAK,CAAEjC,IADX,CAEI,IAAI,CAAC,MAFT,CAGI,QAAQ,CAAE,kBAACkC,CAAD,QAAOjC,CAAAA,OAAO,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,EAHd,CAII,QAAQ,KAJZ,EAFJ,GAzBJ,cAiCI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAEhD,OAAO,CAAC6C,OAA/B,wBACI,KAAC,IAAD,CAAM,KAAN,6BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,KAAK,CAAE/B,cADX,CAEI,EAAE,CAAC,UAFP,CAGI,QAAQ,CAAE,kBAACgC,CAAD,QAAO/B,CAAAA,iBAAiB,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAxB,EAHd,CAII,QAAQ,KAJZ,EAFJ,GAjCJ,cAyCI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAEhD,OAAO,CAAC6C,OAA/B,wBACI,KAAC,IAAD,CAAM,KAAN,0BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,KAAK,CAAE7B,WADX,CAEI,EAAE,CAAC,UAFP,CAGI,QAAQ,CAAE,kBAAC8B,CAAD,QAAO7B,CAAAA,cAAc,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,EAHd,CAII,QAAQ,KAJZ,EAFJ,GAzCJ,cAiDI,YAAK,SAAS,CAAEhD,OAAO,CAACiD,OAAxB,uBACI,kCADJ,EAjDJ,GAFJ,GADJ,EADJ,CA4DH,CAhID,CAmIA,cAAe9C,CAAAA,WAAf","sourcesContent":["import { useContext } from 'react';\r\nimport { useState, useEffect } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useParams } from 'react-router-dom';\r\nimport classes from './EditDetails.module.css'\r\nimport { Form } from 'react-bootstrap';\r\nimport { AuthContext } from '../../shared/context/auth-context';\r\n\r\nconst EditDetails = () => {\r\n    const navigate = useNavigate()\r\n    const auth = useContext(AuthContext)\r\n    const [title, setTitle] = useState('')\r\n    const [location, setLocation] = useState('')\r\n    const [salary, setSalary] = useState(\"\")\r\n    const [type, setType] = useState(\"\")\r\n    const [qualifications, setQualifications] = useState(\"\")\r\n    const [description, setDescription] = useState(\"\")\r\n    const jobId = useParams().id;\r\n\r\n    useEffect(() => {\r\n        const fetchInfo = async () => {\r\n            try {\r\n                const req = await fetch(`${process.env.REACT_APP_BACKEND_URLS}/job/${jobId}`, {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                });\r\n                const data = await req.json();\r\n                setTitle(data.job.title)\r\n                setLocation(data.job.location)\r\n                setSalary(data.job.salary)\r\n                setType(data.job.type)\r\n                setQualifications(data.job.qualifications)\r\n                setDescription(data.job.description)\r\n                if (!req.ok) {\r\n                    throw new Error(req.message)\r\n                }\r\n            } catch (err) { }\r\n        }\r\n        fetchInfo()\r\n    }, [jobId]);\r\n\r\n\r\n    const editJob = async (event) => {\r\n        event.preventDefault()\r\n        try {\r\n            const req = await fetch(`${process.env.REACT_APP_BACKEND_URLS}/job/update`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: 'Bearer ' + auth.token\r\n                },\r\n                body: JSON.stringify({\r\n                    title,\r\n                    location,\r\n                    salary,\r\n                    type,\r\n                    qualifications,\r\n                    description\r\n                }),\r\n            })\r\n            navigate(`/details/${jobId}`)\r\n            if (!req.ok) {\r\n                throw new Error(req.message)\r\n            }\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <section className={classes.page} >\r\n            <div className={classes.auth}>\r\n                <h1>Edit Job</h1>\r\n                <Form onSubmit={editJob}>\r\n                    <Form.Group className={classes.control} >\r\n                        <Form.Label>Company Name</Form.Label>\r\n                        <Form.Control\r\n                            value={title}\r\n                            type='text'\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                            required />\r\n                    </Form.Group>\r\n                    <Form.Group className={classes.control}>\r\n                        <Form.Label>Location</Form.Label>\r\n                        <Form.Control\r\n                            value={location}\r\n                            type='text'\r\n                            onChange={(e) => setLocation(e.target.value)}\r\n                            required />\r\n                    </Form.Group>\r\n                    <Form.Group className={classes.control}>\r\n                        <Form.Label>Salary</Form.Label>\r\n                        <Form.Control\r\n                            value={salary}\r\n                            type='text'\r\n                            onChange={(e) => setSalary(e.target.value)}\r\n                            required />\r\n                    </Form.Group>\r\n                    <Form.Group className={classes.control}>\r\n                        <Form.Label>Job Type</Form.Label>\r\n                        <Form.Control\r\n                            value={type}\r\n                            type='text'\r\n                            onChange={(e) => setType(e.target.value)}\r\n                            required />\r\n                    </Form.Group>\r\n                    <Form.Group className={classes.control}>\r\n                        <Form.Label>Qualifications</Form.Label>\r\n                        <Form.Control\r\n                            value={qualifications}\r\n                            as=\"textarea\"\r\n                            onChange={(e) => setQualifications(e.target.value)}\r\n                            required />\r\n                    </Form.Group>\r\n                    <Form.Group className={classes.control}>\r\n                        <Form.Label>Description</Form.Label>\r\n                        <Form.Control\r\n                            value={description}\r\n                            as=\"textarea\"\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                            required />\r\n                    </Form.Group>\r\n                    <div className={classes.actions}>\r\n                        <button>Submit</button>\r\n                    </div>\r\n                </Form>\r\n            </div>\r\n        </section >\r\n    )\r\n}\r\n\r\n\r\nexport default EditDetails"]},"metadata":{},"sourceType":"module"}